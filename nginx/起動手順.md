# docker build

Dockerfileの作成については、省略している。
cd /mnt/c/Users/blue_/Dropbox/99.work/自宅学習/docker/docker/nginx
docker build -f ./Dockerfile -t centos:nginx --no-cache=true .

docker images

REPOSITORY                           TAG                 IMAGE ID            CREATED             SIZE
centos                               nginx               fc8f406135b2        9 seconds ago       370 MB

docker run -d --privileged -p 9000:8080 -p 9001:22 --name nginx001 -h nginx001 --cpuset-cpus=0 centos:nginx /sbin/init
                 └> ホストのデバイスにアクセス可能になる。

docker ps -a

docker exec -i -t nginx001 /bin/bash

chown root.root /run/chrony
systemctl restart chronyd.service
systemctl status chronyd.service | grep active
chronyc sources
timedatectl status

systemctl status nginx | grep active

ip a

curl http://$(hostname -I | awk -F" " '{print $1}'):8080/index.html

passwd
 └> aslinux

exit

ポートフォワーディングできているか、WSLホストから確認
curl http://$(hostname -I | awk -F" " '{print $1}'):9000/index.html

---

## 2台目

docker run -d --privileged -p 9002:8080 -p 9003:22 --name nginx002 -h nginx002 --cpuset-cpus=0 centos:nginx /sbin/init

docker exec -i -t nginx002 /bin/bash

chown root.root /run/chrony
systemctl restart chronyd.service
systemctl status chronyd.service | grep active
chronyc sources
timedatectl status

systemctl status nginx | grep active

ip a

curl http://$(hostname -I | awk -F" " '{print $1}'):8080/index.html

passwd
 └> aslinux

exit

ポートフォワーディングできているか、WSLホストから確認
curl http://$(hostname -I | awk -F" " '{print $1}'):9002/index.html
